
<!-- Slide 14: CHECK - AgentThread Serialization -->
<div class="slide">
    <div class="devday-header">
        <span class="devday-logo">DEVDAY 2025</span>
    </div>
    <h2>CHECK ‚Äî S√©rialisation de l'AgentThread <span class="emoji">üíæ</span></h2>

    <div class="box warning">
        <p><strong>‚ö†Ô∏è Probl√®me :</strong> Comment persister une conversation entre red√©marrages d'application ou sessions utilisateur ?</p>
    </div>

    <h3 style="margin-top: 30px;">Solution : Serialize / Deserialize</h3>
    <div class="code-block" style="font-size: 0.85em;">// Cr√©er un agent et un thread
AIAgent agent = new OpenAIClient("&lt;api_key&gt;")
    .GetChatClient("gpt-4o-mini")
    .CreateAIAgent("Tu es un assistant DevDay.");

AgentThread thread = agent.GetNewThread();
await agent.RunAsync("Bonjour, je m'appelle Alice.", thread);

// S√©rialiser le thread pour le persister
JsonElement serializedThread = thread.Serialize();
// Stocker dans un fichier/DB...
File.WriteAllText("thread.json", serializedThread.ToString());

// Plus tard... Restaurer le thread
string json = File.ReadAllText("thread.json");
AgentThread resumedThread = AIAgent.DeserializeThread(
    JsonDocument.Parse(json).RootElement);

// Continuer la conversation avec le contexte complet
await agent.RunAsync("Quel est mon nom ?", resumedThread);
    </div>

    <div class="box success" style="margin-top: 20px;">
        <p><strong>üí° Important :</strong> Toujours s√©rialiser/d√©s√©rialiser l'<code>AgentThread</code> complet (pas juste l'historique). Il contient aussi l'√©tat des context providers.</p>
    </div>
</div>