

<!-- Slide 12: CHECK - Chat History Reduction & 3rd Party Storage -->
<div class="slide">
    <div class="devday-header">
        <span class="devday-logo">DEVDAY 2025</span>
    </div>
    <h2>CHECK ‚Äî R√©duction & Stockage Externe</h2>

    <h3>Chat History Reduction avec In-Memory</h3>
    <div class="box warning" style="margin-bottom: 20px;">
        <p><strong>‚ö†Ô∏è Probl√®me :</strong> L'historique peut exploser et d√©passer la limite de contexte du mod√®le.</p>
    </div>

    <div class="code-block" style="font-size: 0.85em;">AIAgent agent = new OpenAIClient("&lt;your_api_key&gt;")
    .GetChatClient(modelName)
    .CreateAIAgent(new ChatClientAgentOptions
    {
        Name = "Assistant",
        Instructions = "Tu es un assistant DevDay.",
        ChatMessageStoreFactory = ctx => new InMemoryChatMessageStore(
            new MessageCountingChatReducer(10), // Garde 10 messages max
            ctx.SerializedState,
            ctx.JsonSerializerOptions,
            InMemoryChatMessageStore.ChatReducerTriggerEvent.AfterMessageAdded)
    });
    </div>

    <h3 style="margin-top: 30px;">3rd Party Chat History Storage</h3>
    <div class="box info">
        <p>Impl√©mentez <code>ChatMessageStore</code> pour stocker l'historique dans une base externe (Redis, SQL, etc.).</p>
    </div>

    <div class="box success" style="margin-top: 20px;">
        <p><strong>üí° Note :</strong> La r√©duction n'est support√©e qu'avec <code>InMemoryChatMessageStore</code>. Pour les services avec stockage in-service ou 3rd party, c'est au service/store de g√©rer la taille.</p>
    </div>
</div>